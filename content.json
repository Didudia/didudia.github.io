{"posts":[{"title":"Hexo博客- Icarus主题优化","text":"前段时间用hexo搭建了自己的博客网站，放在了github里，也就是网上常说的hexo + githu page 搭建的静态博客网站，然后去主题里面挑了icarus,在这里感谢主题作者的创作，由于自己对默认的布局那些不满意，于是就参考网友们的教程，自己动手改了主题 布局文章的两栏布局主题默认是三栏布局，阅读文章的时候空间看起来太挤，这样的话可以通过去改配置文件的方式，把文章变为两栏布局，详细参考官方文档. 两栏主题宽度跟三栏不同，所以要强制指定为三栏布局，并且修改相应的宽度，这样所有的页面侧边栏的宽度就会保持一致。 layout/layout.jsx1234 &lt;Head site={site} config={config} helper={helper} page={page} /&gt;- &lt;body class={`is-${columnCount}-column`}&gt;+ &lt;body class={`is-3-column`}&gt; &lt;Navbar config={config} helper={helper} page={page} /&gt; layout/layout.jsx123456 'is-12': columnCount === 1,- 'is-8-tablet is-8-desktop is-8-widescreen': columnCount === 2,+ 'is-8-tablet is-8-desktop is-9-widescreen': columnCount === 2, 'is-8-tablet is-8-desktop is-6-widescreen': columnCount === 3 layout/common/widgets.jsx12345678910 function getColumnSizeClass(columnCount) { switch (columnCount) { case 2:- return 'is-4-tablet is-4-desktop is-4-widescreen';+ return 'is-4-tablet is-4-desktop is-3-widescreen'; case 3: return 'is-4-tablet is-4-desktop is-3-widescreen'; } include/style/responsive.styl1234567891011121314151617widescreen()+ .is-3-column .container+ max-width: $widescreen - $gap+ width: $widescreen - $gap+ .is-1-column .container, .is-2-column .container max-width: $desktop - 2 * $gap width: $desktop - 2 * $gapfullhd()+ .is-3-column .container+ max-width: $fullhd - 2 * $gap+ width: $fullhd - 2 * $gap+ .is-2-column .container max-width: $widescreen - 2 * $gap width: $widescreen - 2 * $gap 优化文章标题布局标题移动到文章信息上方，增加更新时间，并增加icon layout/common/article.jsx123456789101112131415161718192021222324252627282930313233{/* Metadata */}- &lt;article class={`card-content article${'direction' in page ? ' ' + page.direction : ''}`} role=&quot;article&quot;&gt;+ {/* Title */}+ &lt;h1 className=&quot;title is-size-3 is-size-4-mobile has-text-weight-normal&quot;&gt;+ {index ?+ &lt;a className=&quot;has-link-black-ter&quot; href={url_for(page.link || page.path)}&gt;- &lt;i className=&quot;fas fa-angle-double-right&quot;&gt;&lt;/i&gt;{page.title} //这里是去掉文章标题的指向右边的svg+ &lt;h1&gt;{page.title}&lt;/h1&gt;+ &lt;/a&gt; :+ [&lt;i&gt;&lt;/i&gt;, page.title] + }+ &lt;/h1&gt; {page.layout !== 'page' ? &lt;div class=&quot;article-meta is-size-7 is-uppercase level is-mobile&quot;&gt; &lt;div class=&quot;level-left&quot;&gt; {/* Creation Date */}- {page.date &amp;&amp; &lt;span class=&quot;level-item&quot; dangerouslySetInnerHTML={{- __html: _p('article.created_at', `&lt;time dateTime=&quot;${date_xml(page.date)}&quot; title=&quot;${date_xml(page.date)}&quot;&gt;${date(page.date)}&lt;/time&gt;`)- }}&gt;&lt;/span&gt;}+ {page.date &amp;&amp; &lt;span class=&quot;level-item&quot;&gt;+ &lt;i className=&quot;far fa-calendar-alt&quot;&gt;&amp;nbsp;&lt;/i&gt;+ &lt;time dateTime=&quot;${date_xml(page.date)}&quot; title=&quot;${date_xml(page.date)}&quot;&gt;{date(page.date)}&lt;/time&gt;+ &lt;/span&gt;} {/* Last Update Date */}- {page.updated &amp;&amp; &lt;span class=&quot;level-item&quot; dangerouslySetInnerHTML={{- __html: _p('article.updated_at', `&lt;time dateTime=&quot;${date_xml(page.updated)}&quot; title=&quot;${date_xml(page.updated)}&quot;&gt;${date(page.updated)}&lt;/time&gt;`)- }}&gt;&lt;/span&gt;}+ {page.updated &amp;&amp; &lt;span class=&quot;level-item is-hidden-mobile&quot;&gt;+ &lt;i class=&quot;far fa-calendar-check&quot;&gt;&amp;nbsp;&lt;/i&gt;+ &lt;time dateTime=&quot;${date_xml(page.updated)}&quot; title=&quot;${date_xml(page.updated)}&quot;&gt;{date(page.updated)}&lt;/time&gt;+ &lt;/span&gt;} {/* author */} {page.author ? &lt;span class=&quot;level-item&quot;&gt; {page.author} &lt;/span&gt; : null} layout/common/article.jsx12345 {/* Licensing block */} {!index &amp;&amp; article &amp;&amp; article.licenses &amp;&amp; Object.keys(article.licenses) ? &lt;ArticleLicensing.Cacheable page={page} config={config} helper={helper} /&gt; : null} &lt;hr style=&quot;height:1px;margin:1rem 0&quot; /&gt;+ &lt;div className=&quot;level is-mobile is-flex&quot;&gt; //这里解决首页文章底部展示的标签和阅读更多模块的溢出 其中时间直接使用日期 source/js/main.js12345- if (typeof moment === 'function') {- $('.article-meta time').each(function() {- $(this).text(moment($(this).attr('datetime')).fromNow());- });- } 优化移动端的显示在移动端隐藏archive和tags。 source/js/main.js12345 }+ $('div.container div.card[data-type=tags]').addClass('is-hidden-mobile');+ $('div.container div.card[data-type=archives]').addClass('is-hidden-mobile'); }(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings)); 功能添加定制的PV、UV访问数据icarus主题在启用busuanzi插件之后，只会显示网站的UV数据，没有显示PV，自己添加一个 node_modules\\hexo-theme-icarus\\layout\\common\\footer.jsx123-visitorCounterTitle: _p('plugin.visitor_count', '&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;0&lt;/span&gt;'))+visitorCounterTitle: _p('plugin.visitor_count', '&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;0&lt;/span&gt;') + _p('plugin.visit_count', ', &lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;0&lt;/span&gt;') 增加标题自动计数自己用的感觉不方便，后来舍弃了，以下代码是正确的 include/style/article.styl123456789+.article {counter-reset:section}+.article h2{counter-reset:sub-section}+.article h3{counter-reset:composite}+.article h4{counter-reset:detail}+.article h2:before{content:counter(section) &quot; &quot;;counter-increment:section}+.article h3:before{content:counter(section) &quot;.&quot; counter(sub-section) &quot; &quot;;counter-increment:sub-section}+.article h4:before{content:counter(section) &quot;.&quot; counter(sub-section) &quot;.&quot; counter(composite) &quot; &quot;;counter-increment:composite} 页面footer并排显示一组icon默认情况下一个icon对应一个链接，但例如 CC BY-NC-SA 4.0 需要四个图标一组。因此修改代码，使得配置 link.icon 可以是一个数组，效果可以参考页面底部。 layout/common/footer.jsx12345678910111213 const link = links[name]; return &lt;p class=&quot;control&quot;&gt; &lt;a class={`button is-transparent ${link.icon ? 'is-large' : ''}`} target=&quot;_blank&quot; rel=&quot;noopener&quot; title={name} href={link.url}&gt;- {link.icon ? &lt;i class={link.icon}&gt;&lt;/i&gt; : name}+ {link.icon ?+ (Array.isArray(link.icon) ?+ link.icon.map(i =&gt; [&lt;i className={i}&gt;&lt;/i&gt;, '\\u00A0']) :+ &lt;i className={link.icon}&gt;&lt;/i&gt;+ ) : name} &lt;/a&gt; &lt;/p&gt;; })} 忽略校验的schema include/schema/common/footer.json12- &quot;$ref&quot;: &quot;/misc/poly_links.json&quot;, 再_config.icarus.yml的配置文件如下： 1234567891011footer: links: CC BY-NC-SA 4.0: icon: - fab fa-creative-commons - fab fa-creative-commons-by - fab fa-creative-commons-nc - fab fa-creative-commons-sa url: 'https://creativecommons.org/licenses/by-nc-sa/4.0/' 样式按钮的背景颜色增加渐变效果include/style/widget.styl12345678910 .widget .menu-list li ul margin-right: 0+ a+ transition: background-color 0.3s ease-in-out .level margin-bottom: 0 卡片增加浮动效果:hover 时增大阴影，并增加动画属性 ease-in-out。 include/style/card.styl1234567 .card overflow: visible border-radius: $card-radius+ &amp;:hover+ box-shadow: 0 6px 15px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.1) source/js/animation.js1234567 setTimeout(() =&gt; { $('body &gt; .navbar, body &gt; .section, body &gt; .footer').forEach(element =&gt; { element.style.opacity = '1';- element.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';+ element.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out, box-shadow 0.3s ease-in-out'; }); source/js/animation.js12345 element.style.transform = '';- element.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';+ element.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out, box-shadow 0.3s ease-in-out'; }, i * 100); 更新此文章未完成，等待更新。","link":"/posts/2e99af31.html"},{"title":"电商独立站cms系统：Magento 2.3.5-p2版本安装教程","text":"Magento是一款功能强大且灵活的开源电子商务网站框架，其丰富的模块化架构体系及拓展功能能够为大中型站点提供全面的解决方案。Magento使用PHP开发，支持的PHP版本范围从PHP 5.6到PHP 8.0，并使用MySQL来存储数据。这使得Magento成为一个高度可定制和扩展的平台，适用于各种规模的电子商务业务。 系统环境：Linux服务器，Ubuntu18.04 LTS web服务器：NGINX 数据库：Mariadb（MySQL的分支） PHP：7.2以上，这里推荐7.3版本 magento安装包：官网下载，选择合适的压缩包，通过ftp上传到服务器 magento最好在liunx上体验，在mac或者win环境下，坑会超级多 安装Nginx12sudo apt-get install nginxsudo service nginx start 并且进入网站的根目录创建空的文件夹，作为magento的根目录（var/www/html/231/） 12cd /var/www/htmlmkdir 231 tar和zip两种解压方式，自行选择其中一种，解压压缩包至指定目录 12tar -zxvf 压缩文件.tar -c 指定目录/unzip 压缩文件.zip -d 指定目录 安装PHP7.2及其组件123sudo apt-get install php7.2 php7.2-bcmath php7.2-curl php7.2-gd php7.2-mbstring php7.2-mysql php7.2-xml php7.2-fpm php7.2-intl php7.2-soap php7.2-zipsudo service php7.2-fpm start 安装mysql/mariadb1234sudo apt-get install mariadb-server mariadb-clientsudo service mariadb start 安装数据库并初始化数据库（一系列的创建）开始设置： 12sudo mysql_secure_installation mariadb初始化 (其中“\\g“试情况而定，如果显示error错误，可以舍弃) 12345sudo mysqluse mysql\\g update mysql.user set plugin='mysql_native_password' where User='root';\\g flush privileges;\\q 登陆mysql -u root -p创建新数据库新用户 12create database magento;grant all on *.* to magento2@'%' identified by 'Magento' with grant option; 配置Nginx为magento 网站创建一个新的虚拟主机：vim /etc/nginx/sites-available/magento 添加一下配置(“i”键 插入内容，完事了”:wq”保存退出)： 12345678910upstream fastcgi_backend { server unix:/run/php/php7.2-fpm.sock;}server { listen 80; server_name xxx.xx.xxx.xx(ip地址); set $MAGE_ROOT /var/www/html/231; include /var/www/html/231/nginx.conf.sample;} 通过在/etc/nginx/sites-enabled目录中创建指向它的符号链接来激活新创建的虚拟主机：1ln -s /etc/nginx/sites-available/magento /etc/nginx/sites-enabled 给magento目录赋予777权限，允许Nginx配置的读写1sudo chown -R www-data:www-data 231/ &amp;&amp; sudo chmod -R 777 231/ 重新加载刚才的Nginx配置，并且重启Nginx服务 1systemctl reload nginx &amp;&amp; systemctl restart nginx 安装magento.1输入刚才指定的IP地址，就会跳转到magento的web安装界面（进入magento命令行安装也行）","link":"/posts/52d64983.html"}],"tags":[{"name":"icarus","slug":"icarus","link":"/tags/icarus/"},{"name":"magento","slug":"magento","link":"/tags/magento/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"Nginx","slug":"Nginx","link":"/tags/Nginx/"},{"name":"博客","slug":"博客","link":"/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"独立站","slug":"独立站","link":"/tags/%E7%8B%AC%E7%AB%8B%E7%AB%99/"},{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"}],"categories":[{"name":"Nginx","slug":"Nginx","link":"/categories/Nginx/"},{"name":"Hexo","slug":"Hexo","link":"/categories/Hexo/"}],"pages":[{"title":"test","text":"","link":"/about/index.html"}]}